function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Jweo:function(e,t,n){"use strict";n.r(t),n.d(t,"ContentModule",(function(){return at}));var r=n("ofXK"),o=function(e){return e.TypeScript="TypeScript",e.Java="Java",e.Angular="Angular",e.React="React",e.JavaScript="JavaScript",e.CSharp="C#",e.NodeJS="Node JS",e.PHP="PHP",e.VisualForce="VisualForce",e.Aura="Aura Components",e.Apex="Apex",e.LWC="LWC",e.Firebase="Firebase",e.MongoDB="Mongo DB",e.HTML5="HTML 5",e.CSS3="CSS3",e.Salesforce="Salesforce",e}({});function i(){return Object.keys(o).map((function(e){return o[e]})).sort()}var a,c,s,u=function(){function e(t){_classCallCheck(this,e),this._snackBar=t}return _createClass(e,[{key:"showMsg",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";this._snackBar.open(e,t,{duration:7e3,horizontalPosition:"center",verticalPosition:"top"})}}]),e}(),l=n("3Pt+"),d=n("fXoL"),f=n("3NCR"),b=n("tyNb"),m=n("mrSG"),p=n("Cfvw"),h=n("HDdC"),g=n("itXk"),v=n("bOdf"),C=n("7o/Q"),S=function(){function e(t,n){_classCallCheck(this,e),this.bufferSize=t,this.startBufferEvery=n,this.subscriberClass=n&&t!==n?y:w}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))}}]),e}(),w=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var o;return _classCallCheck(this,n),(o=t.call(this,e)).bufferSize=r,o.buffer=[],o}return _createClass(n,[{key:"_next",value:function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])}},{key:"_complete",value:function(){var e=this.buffer;e.length>0&&this.destination.next(e),_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}}]),n}(C.a),y=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,o){var i;return _classCallCheck(this,n),(i=t.call(this,e)).bufferSize=r,i.startBufferEvery=o,i.buffers=[],i.count=0,i}return _createClass(n,[{key:"_next",value:function(e){var t=this.bufferSize,n=this.startBufferEvery,r=this.buffers,o=this.count;this.count++,o%n==0&&r.push([]);for(var i=r.length;i--;){var a=r[i];a.push(e),a.length===t&&(r.splice(i,1),this.destination.next(a))}}},{key:"_complete",value:function(){for(var e=this.buffers,t=this.destination;e.length>0;){var r=e.shift();r.length>0&&t.next(r)}_get(_getPrototypeOf(n.prototype),"_complete",this).call(this)}}]),n}(C.a),k=n("vkgz"),O=n("eIep"),T=n("lJxs"),M=n("I/3d"),x=((a=function(){function e(t,n){_classCallCheck(this,e),this.db=t,this.auth=n,this.questionCollection=this.db.collection("questions")}return _createClass(e,[{key:"deleteCollection",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,t.abrupt("return",new Promise((function(t,o){return Object(p.a)(r.db.collection(e).ref.get()).pipe(Object(v.a)((function(e){return Object(p.a)(e.docs)})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return n.lift(new S(e,t))}}(500),Object(v.a)((function(e){return new h.a((function(t){var n=r.db.firestore.batch();e.forEach((function(e){return n.delete(e.ref)})),n.commit().then((function(){t.next(e.length),t.complete()})).catch((function(e){return t.error(e)}))}))}))).subscribe((function(e){return n+=e}),(function(e){console.log(e),o(e)}),(function(){return t(n)}))})));case 2:case"end":return t.stop()}}),t)})))}},{key:"deleteQuestion",value:function(e){var t=this;return Object(p.a)(this.deleteCollection("questions/".concat(e,"/comments"))).pipe(Object(k.a)((function(e){return console.log("RES",e)})),Object(O.a)((function(n){return Object(p.a)(t.db.doc("questions/".concat(e)).delete())})))}},{key:"updateQuestion",value:function(e){return Object(p.a)(this.db.doc("questions/".concat(e.uid)).update(e))}},{key:"addQuestion",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.questionCollection.add(e);case 3:return n=t.sent,t.abrupt("return",(e.uid=n.id,e));case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getQuestionById",value:function(e){return this.db.doc("questions/".concat(e)).valueChanges()}},{key:"getQuestions",value:function(){var e=this;return this.auth.checkUser().pipe(Object(O.a)((function(t){if(t.roles.guest){var n=e.transformData(e.db.collection("questions",(function(e){return e.where("onModeration","==",!1)})).snapshotChanges()),r=e.transformData(e.db.collection("questions",(function(e){return e.where("author.authorId","==",t.uid)})).snapshotChanges());return Object(g.a)(n,r).pipe(Object(T.a)((function(e){return e.reduce((function(e,t){return e.concat(t)}))})))}return e.transformData(e.db.collection("questions").snapshotChanges())})))}},{key:"transformData",value:function(e){return e.pipe(Object(T.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({uid:e.payload.doc.id},t)}))})))}}]),e}()).\u0275fac=function(e){return new(e||a)(d.Xb(M.a),d.Xb(f.a))},a.\u0275prov=d.Kb({token:a,factory:a.\u0275fac}),a),_=n("7EHt"),q=n("QibW"),P=n("kmnG"),I=n("d3UM"),A=n("FKr1"),R=n("bSwM"),U=n("bTqV"),F=n("NFeN"),D=n("f0Cb"),j=n("1jcm"),N=n("qFsG"),E=n("A5z7"),B=((s=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t,n,r,o,i){if(!(t||n||r||o||i))return e;var a=e;return a=this.filterQuestionsByResolve(a,t),a=this.filterQuestionByCategory(a,n),a=this.filterQuestionByDate(a,r),a=this.filterQuestionsByAdminApprove(a,o),0===(a=this.filterMyQuestions(a,i)).length?[-1]:a}},{key:"filterQuestionsByResolve",value:function(e,t){if(!t)return e;var n="true"===t;return e.filter((function(e){return e.isResolved===n}))}},{key:"filterQuestionByCategory",value:function(e,t){return t&&0!=t.length?e.filter((function(e){return e.categories.filter((function(e){return t.includes(e)})).length>0?e:null})):e}},{key:"filterQuestionByDate",value:function(e,t){if(!t)return e;var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=[];return"day"===t?o=e.filter((function(e){var t=new Date(1e3*e.date.seconds);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).valueOf()===r.valueOf()})):"week"===t?o=e.filter((function(e){var t=new Date(1e3*e.date.seconds),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(r.getTime()-5184e5);return n.valueOf()>=o.valueOf()})):"month"===t&&(o=e.filter((function(e){var t=new Date(1e3*e.date.seconds),n=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.getMonth()==r.getMonth()&&n.getFullYear()==r.getFullYear()}))),o}},{key:"filterQuestionsByAdminApprove",value:function(e,t){return t?e.filter((function(e){return e.onModeration===t})):e}},{key:"filterMyQuestions",value:function(e,t){if(!t)return e;var n=JSON.parse(localStorage.getItem("user"));return e.filter((function(e){return e.author.authorId===n.uid}))}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275pipe=d.Nb({name:"filterQuestions",type:s,pure:!0}),s),L=((c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){var n=!0===t?1:-1;return e.sort((function(e,t){var r=new Date(1e3*e.date.seconds),o=new Date(1e3*t.date.seconds);return(Number(r)-Number(o))*n}))}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275pipe=d.Nb({name:"sortQuestions",type:c,pure:!0}),c);function Q(e,t){if(1&e&&(d.Tb(0,"mat-option",27),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.mc("value",n),d.Cb(1),d.Dc(n)}}function V(e,t){if(1&e){var n=d.Ub();d.Tb(0,"mat-checkbox",29),d.bc("ngModelChange",(function(e){return d.tc(n),d.fc(2).adminApproveFilterValue=e})),d.Cc(1,"On Moderation"),d.Sb()}if(2&e){var r=d.fc(2);d.mc("ngModel",r.adminApproveFilterValue)}}function z(e,t){if(1&e&&(d.Tb(0,"div"),d.Ac(1,V,2,1,"mat-checkbox",28),d.Sb()),2&e){var n=t.ngIf;d.Cb(1),d.mc("ngIf",n.roles.admin)}}function G(e,t){1&e&&(d.Tb(0,"mat-icon",40),d.Cc(1,"check"),d.Sb())}function $(e,t){1&e&&(d.Tb(0,"div",41),d.Tb(1,"mat-icon"),d.Cc(2,"edit"),d.Sb(),d.Tb(3,"span"),d.Cc(4,"On Moderation"),d.Sb(),d.Sb())}function J(e,t){if(1&e&&(d.Tb(0,"mat-chip"),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.Cb(1),d.Dc(n)}}function Y(e,t){1&e&&(d.Tb(0,"button",45),d.Cc(1,"Approve"),d.Sb())}function K(e,t){if(1&e&&(d.Tb(0,"div",42),d.Ac(1,Y,2,0,"button",43),d.Tb(2,"button",44),d.Cc(3,"Delete"),d.Sb(),d.Sb()),2&e){var n=d.fc(2).$implicit;d.Cb(1),d.mc("ngIf",n.onModeration)}}function H(e,t){if(1&e&&(d.Tb(0,"div"),d.Tb(1,"h1"),d.Cc(2),d.Sb(),d.Tb(3,"div",34),d.Ac(4,G,2,0,"mat-icon",35),d.Ac(5,$,5,0,"div",36),d.Sb(),d.Tb(6,"div",37),d.Tb(7,"em"),d.Cc(8),d.gc(9,"date"),d.Sb(),d.Sb(),d.Tb(10,"mat-chip-list"),d.Ac(11,J,2,1,"mat-chip",38),d.Sb(),d.Ac(12,K,4,1,"div",39),d.Sb()),2&e){var n=d.fc().$implicit,r=d.fc().ngIf;d.Cb(2),d.Dc(n.title),d.Cb(2),d.mc("ngIf",n.isResolved),d.Cb(1),d.mc("ngIf",n.onModeration),d.Cb(3),d.Dc(d.ic(9,6,1e3*n.date.seconds,"dd-MM-yyyy h:mm")),d.Cb(3),d.mc("ngForOf",n.categories),d.Cb(1),d.mc("ngIf",r.roles.admin)}}function X(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div",32),d.bc("click",(function(){d.tc(n);var e=t.$implicit,r=d.fc().ngIf;return d.fc().handleNavigate(e.uid,r)})),d.Ac(1,H,13,9,"div",33),d.Sb()}if(2&e){var r=t.$implicit,o=d.fc(2),i=d.sc(59);d.Fb("filterBlock",-1===r),d.mc("ngClass",o.displayAsCards?"question":"question-row"),d.Cb(1),d.mc("ngIf",-1!==r)("ngIfElse",i)}}var W=function(e,t,n,r,o,i){return[e,t,n,r,o,i]};function Z(e,t){if(1&e&&(d.Tb(0,"div",30),d.Ac(1,X,2,5,"div",31),d.gc(2,"filterQuestions"),d.gc(3,"sortQuestions"),d.Sb()),2&e){var n=d.fc();d.Cb(1),d.mc("ngForOf",d.jc(2,1,d.qc(11,W,d.ic(3,8,n.questionsList,n.sortDirection),n.resolveFilterValue,n.categoriesFilterValue,n.dateFilterValue,n.adminApproveFilterValue,n.myQuestionsFilterValue)))}}function ee(e,t){1&e&&(d.Tb(0,"h1"),d.Cc(1,"Loading data ..."),d.Sb())}function te(e,t){1&e&&(d.Tb(0,"h1",46),d.Cc(1,"Nothing to show!"),d.Sb())}var ne,re=((ne=function(){function e(t,n,r,o){_classCallCheck(this,e),this.authFB=t,this.router=n,this.questionService=r,this.render=o,this.questionsList=[],this.panelOpenState=!1,this.resolveFilterValue=null,this.categoryList=i(),this.categoriesFilterValue=[],this.displayAsCards=!0,this.dateFilterValue=null,this.adminApproveFilterValue=!1,this.myQuestionsFilterValue=!1,this.sortDirection=!0,this.appColor="#FFFFFF"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.user$=this.authFB.checkUser(),this.queSerSub=this.questionService.getQuestions().subscribe((function(t){var n=new Set;t.forEach((function(e){return n.add(JSON.stringify(e))}));var r=[];n.forEach((function(e){return r.push(JSON.parse(e))})),e.questionsList=[].concat(r),console.log(e.questionsList)})),this.form=new l.e({questionResolveGroup:new l.c(null),questionCategoryGroup:new l.c(null),questionDateGroup:new l.c(null),questionApproveGroup:new l.c(null),questionMineGroup:new l.c(null)})}},{key:"handleAddClick",value:function(){this.router.navigate(["content","questions","create"])}},{key:"handleSortBtnClick",value:function(){this.sortDirection=!this.sortDirection}},{key:"resetFilters",value:function(){this.form.reset()}},{key:"handleNavigate",value:function(e,t){this.questionsList.find((function(t){return t.uid===e})),this.router.navigate(["content","question",e])}},{key:"ngOnDestroy",value:function(){this.queSerSub&&this.queSerSub.unsubscribe()}},{key:"handleChangeAppColor",value:function(){this.render.setStyle(document.body,"background-color",this.appColor)}}]),e}()).\u0275fac=function(e){return new(e||ne)(d.Ob(f.a),d.Ob(b.b),d.Ob(x),d.Ob(d.E))},ne.\u0275cmp=d.Ib({type:ne,selectors:[["app-question-page"]],decls:63,vars:17,consts:[[1,"toolbar"],["for","settings-wrapper-id"],["id","settings-wrapper-id",1,"settings-wrapper",3,"formGroup"],[1,"settings-item"],["id","resolved-filter"],["formControlName","questionResolveGroup","aria-labelledby","resolved-filter",1,"resolve-group",3,"ngModel","ngModelChange"],["value","true",1,"resolve-group-btn"],["value","false",1,"resolve-group-btn"],["formControlName","questionCategoryGroup","multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","questionDateGroup",3,"ngModel","ngModelChange"],["value","day"],["value","week"],["value","month"],["formControlName","questionMineGroup",3,"ngModel","ngModelChange"],[4,"ngIf"],["mat-icon-button","","color","primary","aria-label","sort direction",3,"click"],["mat-flat-button","",1,"reset-btn",3,"click"],["for","view-settings"],["id","view-settings",1,"question-settings-wrapper"],[3,"ngModel","ngModelChange"],["appearance","outline"],["type","color","matInput","",3,"ngModel","ngModelChange","change"],["class","questions-wrapper",4,"ngIf","ngIfElse"],["loadingBlock",""],["filterBlock",""],["mat-fab","","color","accent","aria-label","Add question button",1,"plus-btn",3,"click"],[3,"value"],["formControlName","questionApproveGroup",3,"ngModel","ngModelChange",4,"ngIf"],["formControlName","questionApproveGroup",3,"ngModel","ngModelChange"],[1,"questions-wrapper"],[3,"filterBlock","ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[4,"ngIf","ngIfElse"],[1,"icons-wrapper"],["color","primary",4,"ngIf"],["class","on-moderation-wrapper",4,"ngIf"],[1,"date-wrapper"],[4,"ngFor","ngForOf"],["class","admin-controls",4,"ngIf"],["color","primary"],[1,"on-moderation-wrapper"],[1,"admin-controls"],["mat-flat-button","","color","accent",4,"ngIf"],["mat-flat-button","","color","warn"],["mat-flat-button","","color","accent"],[1,"nothing-to-show-header"]],template:function(e,t){if(1&e&&(d.Tb(0,"div",0),d.Tb(1,"mat-accordion"),d.Tb(2,"mat-expansion-panel"),d.Tb(3,"mat-expansion-panel-header"),d.Tb(4,"mat-panel-title"),d.Cc(5," Settings "),d.Sb(),d.Sb(),d.Tb(6,"label",1),d.Cc(7,"Filters and Sort"),d.Sb(),d.Tb(8,"div",2),d.Tb(9,"div",3),d.Tb(10,"label",4),d.Cc(11,"Resolved/unresolved questions"),d.Sb(),d.Tb(12,"mat-radio-group",5),d.bc("ngModelChange",(function(e){return t.resolveFilterValue=e})),d.Tb(13,"mat-radio-button",6),d.Cc(14," Resolved "),d.Sb(),d.Tb(15,"mat-radio-button",7),d.Cc(16," Unresolved "),d.Sb(),d.Sb(),d.Sb(),d.Tb(17,"div",3),d.Tb(18,"mat-form-field"),d.Tb(19,"mat-label"),d.Cc(20,"Categories"),d.Sb(),d.Tb(21,"mat-select",8),d.bc("ngModelChange",(function(e){return t.categoriesFilterValue=e})),d.Ac(22,Q,2,2,"mat-option",9),d.Sb(),d.Sb(),d.Sb(),d.Tb(23,"div",3),d.Tb(24,"mat-form-field"),d.Tb(25,"mat-label"),d.Cc(26,"Filter by date"),d.Sb(),d.Tb(27,"mat-select",10),d.bc("ngModelChange",(function(e){return t.dateFilterValue=e})),d.Tb(28,"mat-option",11),d.Cc(29,"Day"),d.Sb(),d.Tb(30,"mat-option",12),d.Cc(31,"Week"),d.Sb(),d.Tb(32,"mat-option",13),d.Cc(33,"Month"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Tb(34,"mat-checkbox",14),d.bc("ngModelChange",(function(e){return t.myQuestionsFilterValue=e})),d.Cc(35,"My questions"),d.Sb(),d.Ac(36,z,2,1,"div",15),d.gc(37,"async"),d.Tb(38,"button",16),d.bc("click",(function(){return t.handleSortBtnClick()})),d.Tb(39,"mat-icon"),d.Cc(40),d.Sb(),d.Sb(),d.Tb(41,"button",17),d.bc("click",(function(){return t.resetFilters()})),d.Tb(42,"mat-icon"),d.Cc(43,"close"),d.Sb(),d.Sb(),d.Sb(),d.Pb(44,"mat-divider"),d.Tb(45,"label",18),d.Cc(46,"Questions view settings"),d.Sb(),d.Tb(47,"div",19),d.Tb(48,"mat-slide-toggle",20),d.bc("ngModelChange",(function(e){return t.displayAsCards=e})),d.Cc(49),d.Sb(),d.Tb(50,"mat-form-field",21),d.Tb(51,"mat-label"),d.Cc(52,"Application Color"),d.Sb(),d.Tb(53,"input",22),d.bc("ngModelChange",(function(e){return t.appColor=e}))("change",(function(){return t.handleChangeAppColor()})),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Ac(54,Z,4,18,"div",23),d.gc(55,"async"),d.Ac(56,ee,2,0,"ng-template",null,24,d.Bc),d.Ac(58,te,2,0,"ng-template",null,25,d.Bc),d.Tb(60,"button",26),d.bc("click",(function(){return t.handleAddClick()})),d.Tb(61,"mat-icon"),d.Cc(62,"add"),d.Sb(),d.Sb()),2&e){var n=d.sc(57);d.Cb(8),d.mc("formGroup",t.form),d.Cb(4),d.mc("ngModel",t.resolveFilterValue),d.Cb(9),d.mc("ngModel",t.categoriesFilterValue),d.Cb(1),d.mc("ngForOf",t.categoryList),d.Cb(5),d.mc("ngModel",t.dateFilterValue),d.Cb(7),d.mc("ngModel",t.myQuestionsFilterValue),d.Cb(2),d.mc("ngIf",d.hc(37,13,t.user$)),d.Cb(4),d.Dc(t.sortDirection?"arrow_downward":"arrow_upward"),d.Cb(8),d.mc("ngModel",t.displayAsCards),d.Cb(1),d.Dc(t.displayAsCards?"Display as tile":"Display as row"),d.Cb(4),d.mc("ngModel",t.appColor),d.Cb(1),d.mc("ngIf",d.hc(55,15,t.questionsList.length>0&&t.user$))("ngIfElse",n)}},directives:[_.a,_.c,_.e,_.f,l.l,l.f,q.b,l.k,l.d,q.a,P.c,P.f,I.a,r.k,A.i,R.a,r.l,U.a,F.a,D.a,j.a,l.n,N.a,l.b,r.j,E.b,E.a],pipes:[r.b,B,L,r.e],styles:["[_nghost-%COMP%]{width:100%}.filterBlock[_ngcontent-%COMP%]{flex:0 0 100%!important;max-width:none!important;box-shadow:none!important;border:none!important;text-align:center}.nothing-to-show-header[_ngcontent-%COMP%]{color:#dc0f0c}.plus-btn[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;transform:translate(-10%,-50%)}.toolbar[_ngcontent-%COMP%]{margin-bottom:3rem}.settings-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;border:1px dashed grey;padding:1rem}.resolve-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center}mat-divider[_ngcontent-%COMP%]{margin:1rem 0}.question-settings-wrapper[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px dashed grey}.questions-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}.question[_ngcontent-%COMP%]{padding:1.5rem 1rem;flex:0 0 calc(33% - 2rem);max-width:300px;min-height:300px;margin-bottom:2rem}.question[_ngcontent-%COMP%], .question-row[_ngcontent-%COMP%]{box-shadow:0 4px 8px 0 rgba(0,0,0,.2);transition:.3s}.question-row[_ngcontent-%COMP%]{max-width:none;flex:0 0 100%;margin-bottom:1rem;text-align:center}.question-row[_ngcontent-%COMP%]   mat-chip-list[_ngcontent-%COMP%]{display:inline-block;text-align:center}.question[_ngcontent-%COMP%], .question-row[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 8px 16px 0 rgba(0,0,0,.2)}.question[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}mat-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px}.date-wrapper[_ngcontent-%COMP%], .icons-wrapper[_ngcontent-%COMP%]{text-align:center}.icons-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.on-moderation-wrapper[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;align-items:center;justify-content:center}.admin-controls[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:center}.admin-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;margin-right:2px}@media screen and (max-width:768px){.question[_ngcontent-%COMP%]{flex:0 0 100%}}"]}),ne),oe=n("PCNd"),ie=n("dNgK"),ae=n("cyVl");function ce(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please enter question title!"),d.Sb(),d.Sb())}function se(e,t){if(1&e&&(d.Tb(0,"mat-option",12),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.mc("value",n),d.Cb(1),d.Dc(n)}}function ue(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please choose some categories!"),d.Sb(),d.Sb())}function le(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please enter your question!"),d.Sb(),d.Sb())}var de,fe,be=["*"],me=((de=function(){function e(t,n,r,o){_classCallCheck(this,e),this.router=t,this.questionService=n,this._snackBar=r,this.spinnerService=o,this.categoryList=i(),this.disableBtn=!1,this.showUserMsg=new u(this._snackBar)}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=new l.e({title:new l.c(null,[l.q.required]),categories:new l.c(null,[l.q.required]),text:new l.c(null,[l.q.required])})}},{key:"handleCancel",value:function(){this.router.navigate(["content","questions"])}},{key:"handleAdd",value:function(){var e=this;if(this.form.invalid)return null;var t=JSON.parse(localStorage.getItem("user")),n={author:{authorId:t.uid,authorName:t.email?t.email:t.displayName,authorPhoto:t.photoURL?t.photoURL:"https://cdn3.vectorstock.com/i/1000x1000/05/37/error-message-skull-vector-3320537.jpg"},title:this.form.value.title,text:this.form.value.text,categories:this.form.value.categories,date:new Date,onModeration:!0,isResolved:!1};this.disableBtn=!0,this.spinnerService.showSpinner(),this.questionService.addQuestion(n).then((function(t){e.showUserMsg.showMsg('Your question: "'.concat(t.title,'" is accepted. After the administrator checks your question, it will be visible to other users.'))})).catch((function(t){e.showUserMsg.showMsg(t.message,"Error")})).finally((function(){e.form.reset({categories:"",title:"",text:""}),e.disableBtn=!1,e.spinnerService.hideSpinner()}))}}]),e}()).\u0275fac=function(e){return new(e||de)(d.Ob(b.b),d.Ob(x),d.Ob(ie.a),d.Ob(ae.a))},de.\u0275cmp=d.Ib({type:de,selectors:[["app-create-question-page"]],ngContentSelectors:be,decls:26,vars:9,consts:[[1,"component-wrapper"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","title","name","title"],[4,"ngIf"],["appearance","standard"],["multiple","","formControlName","categories"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","text",3,"matTextareaAutosize","cdkAutosizeMinRows"],[1,"btn-wrapper"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(d.lc(),d.Tb(0,"div",0),d.Tb(1,"h1"),d.Cc(2,"New question"),d.Sb(),d.Tb(3,"form",1),d.Tb(4,"mat-form-field",2),d.Tb(5,"mat-label"),d.Cc(6,"tittle"),d.Sb(),d.Pb(7,"input",3),d.Ac(8,ce,3,0,"mat-error",4),d.Sb(),d.Tb(9,"mat-form-field",5),d.Tb(10,"mat-label"),d.Cc(11,"Categories"),d.Sb(),d.Tb(12,"mat-select",6),d.Ac(13,se,2,2,"mat-option",7),d.Sb(),d.Ac(14,ue,3,0,"mat-error",4),d.Sb(),d.Tb(15,"mat-form-field",2),d.Tb(16,"mat-label"),d.Cc(17,"Text"),d.Sb(),d.Pb(18,"textarea",8),d.Ac(19,le,3,0,"mat-error",4),d.Sb(),d.Sb(),d.Tb(20,"div",9),d.Tb(21,"button",10),d.bc("click",(function(){return t.handleCancel()})),d.Cc(22,"Cancel"),d.Sb(),d.Tb(23,"button",11),d.bc("click",(function(){return t.handleAdd()})),d.Cc(24,"Add"),d.Sb(),d.Sb(),d.Sb(),d.kc(25)),2&e&&(d.Cb(3),d.mc("formGroup",t.form),d.Cb(5),d.mc("ngIf",t.form.get("title").hasError("required")),d.Cb(5),d.mc("ngForOf",t.categoryList),d.Cb(1),d.mc("ngIf",t.form.get("categories").hasError("required")),d.Cb(4),d.mc("matTextareaAutosize",!0)("cdkAutosizeMinRows",10),d.Cb(1),d.mc("ngIf",t.form.get("text").hasError("required")),d.Cb(2),d.mc("disabled",t.disableBtn),d.Cb(2),d.mc("disabled",t.form.invalid||t.disableBtn))},directives:[l.r,l.l,l.f,P.c,P.f,N.a,l.b,l.k,l.d,r.l,I.a,r.k,N.c,U.a,P.b,A.i],styles:["[_nghost-%COMP%]{width:85%;margin:2rem auto 0;padding:1rem 3rem;border:1px solid var(--dark-color)}.component-wrapper[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:flex;flex-direction:column}h1[_ngcontent-%COMP%]{text-align:center;text-transform:capitalize;padding-bottom:1rem;margin-bottom:2rem;border-bottom:1px solid var(--dark-color)}form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.btn-wrapper[_ngcontent-%COMP%]{width:100%;text-align:right}.btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-block;width:75px}@media screen and (max-width:768px){[_nghost-%COMP%]{padding:1rem}.component-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%}}"]}),de),pe=n("VRyK"),he=n("0IaG"),ge=n("pLZG"),ve=((fe=function(){function e(t){_classCallCheck(this,e),this.db=t}return _createClass(e,[{key:"deleteComment",value:function(e){return Object(p.a)(this.db.doc("questions/".concat(e.questionId,"/comments/").concat(e.uid)).delete())}},{key:"updateComment",value:function(e){return Object(p.a)(this.db.doc("questions/".concat(e.questionId,"/comments/").concat(e.uid)).update(e))}},{key:"getCommentsForQuestion",value:function(e){return this.db.collection("questions/".concat(e,"/comments"),(function(e){return e.orderBy("date")})).snapshotChanges().pipe(Object(T.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({uid:e.payload.doc.id},t)}))})))}},{key:"getAnswerCommentForQuestion",value:function(e){return this.db.collection("questions/".concat(e,"/comments"),(function(e){return e.where("isSolution","==",!0).limit(1)})).valueChanges().pipe(Object(ge.a)((function(e){return 0!==e.length})),Object(T.a)((function(e){return e[0]})))}},{key:"addComment",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.db.collection("questions/".concat(e.questionId,"/comments")).add(e);case 3:return n=t.sent,t.abrupt("return",(e.uid=n.id,e));case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}()).\u0275fac=function(e){return new(e||fe)(d.Xb(M.a))},fe.\u0275prov=d.Kb({token:fe,factory:fe.\u0275fac}),fe);function Ce(e,t){1&e&&(d.Tb(0,"mat-error"),d.Cc(1,"Please, enter some values!"),d.Sb())}var Se,we=((Se=function(){function e(t,n,r,o,i){_classCallCheck(this,e),this.commentsService=t,this.dialogRef=n,this.spinnerService=r,this._snackBar=o,this.data=i,this.commentText="",this.showUserMsg=new u(this._snackBar)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"handleAddComment",value:function(){var e=this,t={author:{authorName:this.data.u.displayName||this.data.u.email,authorId:this.data.u.uid,authorPhoto:this.data.u.photoURL||"https://cdn3.vectorstock.com/i/1000x1000/05/37/error-message-skull-vector-3320537.jpg"},date:new Date,isSolution:!1,questionId:this.data.q.uid,text:this.commentText};this.spinnerService.showSpinner(),this.commentsService.addComment(t).then((function(t){e.showUserMsg.showMsg("Thank you, ".concat(t.author.authorName," for response!"))})).catch((function(t){e.showUserMsg.showMsg(t.message,"Error")})).finally((function(){e.spinnerService.hideSpinner(),e.dialogRef.close()}))}}]),e}()).\u0275fac=function(e){return new(e||Se)(d.Ob(ve),d.Ob(he.g),d.Ob(ae.a),d.Ob(ie.a),d.Ob(he.a))},Se.\u0275cmp=d.Ib({type:Se,selectors:[["app-add-comment-dialog"]],decls:13,vars:4,consts:[["mat-dialog-title",""],["appearance","outline","color","primary"],["matInput","","required","",3,"ngModel","ngModelChange"],[4,"ngIf"],["align","center"],["mat-flat-button","","mat-dialog-close","","color","accent"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(d.Tb(0,"h1",0),d.Cc(1),d.Sb(),d.Tb(2,"mat-dialog-content"),d.Tb(3,"mat-form-field",1),d.Tb(4,"mat-label"),d.Cc(5,"Your answer..."),d.Sb(),d.Tb(6,"textarea",2),d.bc("ngModelChange",(function(e){return t.commentText=e})),d.Sb(),d.Ac(7,Ce,2,0,"mat-error",3),d.Sb(),d.Sb(),d.Tb(8,"mat-dialog-actions",4),d.Tb(9,"button",5),d.Cc(10,"Close"),d.Sb(),d.Tb(11,"button",6),d.bc("click",(function(){return t.handleAddComment()})),d.Cc(12,"Add"),d.Sb(),d.Sb()),2&e&&(d.Cb(1),d.Ec('Add your solution to: "',t.data.q.title,'" question'),d.Cb(5),d.mc("ngModel",t.commentText),d.Cb(1),d.mc("ngIf",!t.commentText),d.Cb(4),d.mc("disabled",!t.commentText))},directives:[he.h,he.e,P.c,P.f,N.a,l.b,l.p,l.k,l.n,r.l,he.c,U.a,he.d,P.b],styles:["h1[_ngcontent-%COMP%]{font-weight:700;text-align:centerlo}mat-dialog-content[_ngcontent-%COMP%]{margin:1.5rem 0}mat-form-field[_ngcontent-%COMP%]{width:100%}@media screen and (max-width:768px){[_nghost-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{font-size:16px}}"]}),Se);function ye(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please enter question title!"),d.Sb(),d.Sb())}function ke(e,t){if(1&e&&(d.Tb(0,"mat-option",13),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.mc("value",n),d.Cb(1),d.Dc(n)}}function Oe(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please choose some categories!"),d.Sb(),d.Sb())}function Te(e,t){1&e&&(d.Tb(0,"mat-error"),d.Tb(1,"em"),d.Cc(2,"Please enter your question!"),d.Sb(),d.Sb())}function Me(e,t){1&e&&(d.Tb(0,"mat-checkbox",14),d.Cc(1,"Question Resolved"),d.Sb())}var xe,_e=((xe=function(){function e(t,n,r,o,a,c){_classCallCheck(this,e),this.questionService=t,this.commentsService=n,this.dialogRef=r,this.spinnerService=o,this._snackBar=a,this.data=c,this.categoryList=i(),this.showUserMsg=new u(this._snackBar)}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=new l.e({title:new l.c(this.data.q.title,[l.q.required]),categories:new l.c(this.data.q.categories,[l.q.required]),text:new l.c(this.data.q.text,[l.q.required]),isResolved:new l.c(this.data.q.isResolved)})}},{key:"handleEditQuestion",value:function(){var e=this;if(this.form.invalid)return null;var t={uid:this.data.q.uid,title:this.form.value.title,categories:this.form.value.categories,text:this.form.value.text,isResolved:this.form.value.isResolved,author:this.data.q.author,onModeration:this.data.q.onModeration,date:this.data.q.date};this.spinnerService.showSpinner(),this.updQSub=this.questionService.updateQuestion(t).subscribe((function(){var n;t.isResolved||(e.updCSub=e.commentsService.getAnswerCommentForQuestion(t.uid).pipe(Object(O.a)((function(t){return t.isSolution=!1,n=t,e.commentsService.updateComment(t)}))).subscribe((function(){e.showUserMsg.showMsg('This comment: "'.concat(n.text.substr(0,25),' ..." is no longer an answer to your question'))}),(function(t){e.showUserMsg.showMsg(t.message,"Error")}))),e.spinnerService.hideSpinner(),e.showUserMsg.showMsg('Your question "'.concat(t.title,'" was updated!'))}),(function(t){e.spinnerService.hideSpinner(),e.showUserMsg.showMsg(t.message,"Error"),e.dialogRef.close()}),(function(){e.spinnerService.hideSpinner(),e.dialogRef.close()}))}},{key:"ngOnDestroy",value:function(){this.updQSub&&this.updQSub.unsubscribe(),this.updCSub&&this.updCSub.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||xe)(d.Ob(x),d.Ob(ve),d.Ob(he.g),d.Ob(ae.a),d.Ob(ie.a),d.Ob(he.a))},xe.\u0275cmp=d.Ib({type:xe,selectors:[["app-edit-question-dialog"]],decls:26,vars:10,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","title","name","title"],[4,"ngIf"],["appearance","standard"],["multiple","","formControlName","categories"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","text",3,"matTextareaAutosize","cdkAutosizeMinRows"],["formControlName","isResolved","color","primary",4,"ngIf"],["align","center"],["mat-flat-button","","mat-dialog-close","","color","accent"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],["formControlName","isResolved","color","primary"]],template:function(e,t){1&e&&(d.Tb(0,"h1",0),d.Cc(1),d.Sb(),d.Tb(2,"mat-dialog-content"),d.Tb(3,"form",1),d.Tb(4,"mat-form-field",2),d.Tb(5,"mat-label"),d.Cc(6,"tittle"),d.Sb(),d.Pb(7,"input",3),d.Ac(8,ye,3,0,"mat-error",4),d.Sb(),d.Tb(9,"mat-form-field",5),d.Tb(10,"mat-label"),d.Cc(11,"Categories"),d.Sb(),d.Tb(12,"mat-select",6),d.Ac(13,ke,2,2,"mat-option",7),d.Sb(),d.Ac(14,Oe,3,0,"mat-error",4),d.Sb(),d.Tb(15,"mat-form-field",2),d.Tb(16,"mat-label"),d.Cc(17,"Text"),d.Sb(),d.Pb(18,"textarea",8),d.Ac(19,Te,3,0,"mat-error",4),d.Sb(),d.Ac(20,Me,2,0,"mat-checkbox",9),d.Sb(),d.Sb(),d.Tb(21,"mat-dialog-actions",10),d.Tb(22,"button",11),d.Cc(23,"Close"),d.Sb(),d.Tb(24,"button",12),d.bc("click",(function(){return t.handleEditQuestion()})),d.Cc(25,"Add"),d.Sb(),d.Sb()),2&e&&(d.Cb(1),d.Ec('Edit: "',t.data.q.title,'" question'),d.Cb(2),d.mc("formGroup",t.form),d.Cb(5),d.mc("ngIf",t.form.get("title").hasError("required")),d.Cb(5),d.mc("ngForOf",t.categoryList),d.Cb(1),d.mc("ngIf",t.form.get("categories").hasError("required")),d.Cb(4),d.mc("matTextareaAutosize",!0)("cdkAutosizeMinRows",10),d.Cb(1),d.mc("ngIf",t.form.get("text").hasError("required")),d.Cb(1),d.mc("ngIf",t.data.q.isResolved),d.Cb(4),d.mc("disabled",t.form.invalid))},directives:[he.h,he.e,l.r,l.l,l.f,P.c,P.f,N.a,l.b,l.k,l.d,r.l,I.a,r.k,N.c,he.c,U.a,he.d,P.b,A.i,R.a],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}form[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}input[_ngcontent-%COMP%]{padding:.5rem 0}textarea[_ngcontent-%COMP%]{min-height:100px}mat-checkbox[_ngcontent-%COMP%]{width:100%;padding-top:.5rem}mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{width:32px;height:32px}"]}),xe);function qe(e,t){if(1&e&&(d.Tb(0,"mat-chip",10),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.Cb(1),d.Dc(n)}}function Pe(e,t){if(1&e){var n=d.Ub();d.Tb(0,"button",16),d.bc("click",(function(){d.tc(n);var e=d.fc().ngIf,t=d.fc().ngIf;return d.fc().handleEditQuestion(t,e)})),d.Cc(1," Edit "),d.Sb()}}function Ie(e,t){if(1&e){var n=d.Ub();d.Tb(0,"button",12),d.bc("click",(function(){d.tc(n);var e=d.fc(2).ngIf,t=d.fc(),r=d.sc(3);return t.handleApprove(e,r)})),d.Cc(1," Approve "),d.Sb()}}function Ae(e,t){if(1&e){var n=d.Ub();d.Tb(0,"button",17),d.bc("click",(function(){d.tc(n);var e=d.fc(2).ngIf,t=d.fc(),r=d.sc(3);return t.handleDelete(e,r)})),d.Cc(1," Delete "),d.Sb()}}function Re(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div",11),d.Tb(1,"button",12),d.bc("click",(function(){d.tc(n);var e=t.ngIf,r=d.fc().ngIf;return d.fc().handleAddComment(r,e)})),d.Cc(2," Comment "),d.Sb(),d.Ac(3,Pe,2,0,"button",13),d.Ac(4,Ie,2,0,"button",14),d.Ac(5,Ae,2,0,"button",15),d.Sb()}if(2&e){var r=t.ngIf,o=d.fc().ngIf;d.Cb(3),d.mc("ngIf",r.uid===o.author.authorId),d.Cb(1),d.mc("ngIf",r.roles.admin&&o.onModeration),d.Cb(1),d.mc("ngIf",r.roles.admin)}}function Ue(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div"),d.Tb(1,"button",26),d.bc("click",(function(){d.tc(n);var e=d.fc().$implicit,t=d.fc(2).ngIf,r=d.fc(),o=d.sc(3);return r.handleCommentMark(e,t,o)})),d.Tb(2,"mat-icon"),d.Cc(3,"done_outline"),d.Sb(),d.Sb(),d.Sb()}}function Fe(e,t){if(1&e){var n=d.Ub();d.Tb(0,"button",27),d.bc("click",(function(){d.tc(n);var e=d.fc().$implicit,t=d.fc(2).ngIf,r=d.fc(),o=d.sc(3);return r.handleDeleteComment(e,t,o)})),d.Cc(1,"Delete "),d.Sb()}}function De(e,t){1&e&&(d.Tb(0,"div"),d.Tb(1,"mat-icon",28),d.Cc(2,"check"),d.Sb(),d.Sb())}function je(e,t){if(1&e&&(d.Tb(0,"div",20),d.Tb(1,"div",21),d.Pb(2,"img",22),d.Tb(3,"span"),d.Cc(4),d.Sb(),d.Sb(),d.Tb(5,"div",23),d.Tb(6,"p"),d.Cc(7),d.Sb(),d.Tb(8,"p"),d.Tb(9,"em"),d.Cc(10),d.gc(11,"date"),d.Sb(),d.Sb(),d.Sb(),d.Tb(12,"div",24),d.Ac(13,Ue,4,0,"div",0),d.Tb(14,"div"),d.Ac(15,Fe,2,0,"button",25),d.Sb(),d.Ac(16,De,3,0,"div",0),d.Sb(),d.Sb()),2&e){var n=t.$implicit,r=d.fc(2).ngIf,o=d.fc();d.Cb(2),d.nc("src",n.author.authorPhoto,d.vc),d.nc("alt",n.author.authorName),d.Cb(2),d.Dc(n.author.authorName),d.Cb(3),d.Dc(n.text),d.Cb(3),d.Dc(d.ic(11,8,1e3*n.date.seconds,"dd:MM:yyyy hh:mm")),d.Cb(3),d.mc("ngIf",!r.isResolved&&r.author.authorId===o.authorId),d.Cb(2),d.mc("ngIf",o.mUser.roles.admin),d.Cb(1),d.mc("ngIf",n.isSolution)}}function Ne(e,t){if(1&e&&(d.Tb(0,"div",18),d.Tb(1,"h1"),d.Cc(2),d.Sb(),d.Ac(3,je,17,11,"div",19),d.Sb()),2&e){var n=t.ngIf;d.Cb(2),d.Dc(n.length>0?"Comments/Answers":"No comments"),d.Cb(1),d.mc("ngForOf",n)}}function Ee(e,t){if(1&e&&(d.Tb(0,"div"),d.Tb(1,"div",3),d.Tb(2,"div",4),d.Tb(3,"h3"),d.Cc(4),d.Sb(),d.Tb(5,"h3"),d.Cc(6),d.gc(7,"date"),d.Sb(),d.Sb(),d.Tb(8,"h1"),d.Cc(9),d.Sb(),d.Tb(10,"p",5),d.Cc(11),d.Sb(),d.Tb(12,"div",6),d.Tb(13,"mat-chip-list"),d.Ac(14,qe,2,1,"mat-chip",7),d.Sb(),d.Ac(15,Re,6,3,"div",8),d.gc(16,"async"),d.Sb(),d.Sb(),d.Ac(17,Ne,4,2,"div",9),d.gc(18,"async"),d.Sb()),2&e){var n=t.ngIf,r=d.fc(),o=d.sc(5);d.Cb(4),d.Dc(n.author.authorName),d.Cb(2),d.Dc(d.ic(7,8,1e3*n.date.seconds,"dd-MM-yyyy , hh:mm")),d.Cb(3),d.Dc(n.title),d.Cb(2),d.Dc(n.text),d.Cb(3),d.mc("ngForOf",n.categories),d.Cb(1),d.mc("ngIf",d.hc(16,11,r.currentUser$)),d.Cb(2),d.mc("ngIf",d.hc(18,13,r.comments$))("ngIfElse",o)}}function Be(e,t){if(1&e){var n=d.Ub();d.Tb(0,"h2",29),d.Cc(1),d.Sb(),d.Tb(2,"mat-dialog-content"),d.Tb(3,"p",30),d.Tb(4,"em"),d.Cc(5,"Author: "),d.Sb(),d.Cc(6),d.Sb(),d.Tb(7,"p",30),d.Tb(8,"em"),d.Cc(9,"Text: "),d.Sb(),d.Cc(10),d.Sb(),d.Tb(11,"p",30),d.Tb(12,"em"),d.Cc(13,"Date: "),d.Sb(),d.Cc(14),d.gc(15,"date"),d.Sb(),d.Sb(),d.Tb(16,"mat-dialog-actions",31),d.Tb(17,"button",32),d.Cc(18,"Cancel"),d.Sb(),d.Tb(19,"button",27),d.bc("click",(function(){return d.tc(n),d.fc().dialogRef.close("OK")})),d.Cc(20,"OK"),d.Sb(),d.Sb()}if(2&e){var r=t.$implicit,o=d.fc();d.Cb(1),d.Dc(o.dialogTitle),d.Cb(5),d.Dc(r.author.authorName),d.Cb(4),d.Dc(r.text),d.Cb(4),d.Dc(d.ic(15,4,1e3*r.date.seconds,"yyyy-MM-dd , hh:mm"))}}function Le(e,t){1&e&&(d.Tb(0,"h1"),d.Cc(1,"Loading comments..."),d.Sb())}var Qe,Ve,ze=((Qe=function(){function e(t,n,r,o,i,a,c,s){_classCallCheck(this,e),this.activatedRoute=t,this.router=n,this.questionService=r,this.commentsService=o,this.auth=i,this.dialog=a,this._matSnakBar=c,this.spinnerService=s,this.questionId="",this.authorId="",this.dialogTitle="",this.userMessage=new u(this._matSnakBar)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.params.subscribe((function(t){e.questionId=t.uid,e.currentQuestion$=e.questionService.getQuestionById(t.uid),e.currentUser$=e.auth.checkUser().pipe(Object(k.a)((function(t){e.authorId=t.uid,e.mUser=t}))),e.comments$=e.commentsService.getCommentsForQuestion(e.questionId)}))}},{key:"handleAddComment",value:function(e,t){e.uid=this.questionId,this.dialog.open(we,{data:{q:e,u:t},minWidth:"300px",width:"50%",hasBackdrop:!0})}},{key:"handleApprove",value:function(e,t){var n=this;this.dialogTitle='Approve this question: "'.concat(e.title,'"?'),this.dialogRef=this.dialog.open(t,{data:e}),this.dialogRef.afterClosed().pipe(Object(ge.a)((function(e){return"OK"===e})),Object(O.a)((function(t){return n.spinnerService.showSpinner(),e.uid=n.questionId,e.onModeration=!1,n.questionService.updateQuestion(e)}))).subscribe((function(){n.spinnerService.hideSpinner(),n.userMessage.showMsg("You approved this question: ".concat(e.title))}),(function(e){n.spinnerService.hideSpinner(),n.userMessage.showMsg("Something goes wrong!: ".concat(e.message),"Error")}),(function(){n.spinnerService.hideSpinner()}))}},{key:"handleDelete",value:function(e,t){var n=this;this.dialogTitle='Do you want to delete this question: "'.concat(e.title,'"?'),this.dialogRef=this.dialog.open(t,{data:e}),this.dialogRef.afterClosed().pipe(Object(ge.a)((function(e){return"OK"===e})),Object(O.a)((function(e){return n.spinnerService.showSpinner(),n.questionService.deleteQuestion(n.questionId)}))).subscribe((function(){n.spinnerService.hideSpinner(),n.userMessage.showMsg("You delete this question: ".concat(e.title)),n.router.navigate(["content","questions"])}),(function(e){n.spinnerService.hideSpinner(),n.userMessage.showMsg("Something goes wrong!: ".concat(e.message),"Error")}),(function(){n.spinnerService.hideSpinner()}))}},{key:"handleCommentMark",value:function(e,t,n){var r=this;this.dialogTitle="Mark as solution?",this.dialogRef=this.dialog.open(n,{data:e}),this.dialogRef.afterClosed().pipe(Object(ge.a)((function(e){return"OK"===e})),Object(O.a)((function(n){t.uid=r.questionId,t.isResolved=!0,e.isSolution=!0,r.spinnerService.showSpinner();var o=r.questionService.updateQuestion(t),i=r.commentsService.updateComment(e);return Object(pe.a)(o,i)}))).subscribe((function(){r.spinnerService.hideSpinner(),r.userMessage.showMsg("Your question marked as resolved!")}),(function(e){r.spinnerService.hideSpinner(),r.userMessage.showMsg("Something goes wrong!: ".concat(e.message),"Error")}),(function(){r.spinnerService.hideSpinner()}))}},{key:"handleDeleteComment",value:function(e,t,n){var r=this;this.dialogTitle="Delete this comment?",this.dialogRef=this.dialog.open(n,{data:e}),this.dialogRef.afterClosed().pipe(Object(ge.a)((function(e){return"OK"===e})),Object(O.a)((function(n){if(r.spinnerService.showSpinner(),!e.isSolution)return r.commentsService.deleteComment(e);t.uid=r.questionId,t.isResolved=!1;var o=r.questionService.updateQuestion(t),i=r.commentsService.deleteComment(e);return Object(pe.a)(o,i)}))).subscribe((function(){r.spinnerService.hideSpinner(),r.userMessage.showMsg("You successfully delete comment")}),(function(e){r.spinnerService.hideSpinner(),r.userMessage.showMsg("Something goes wrong!: ".concat(e.message),"Error")}),(function(){r.spinnerService.hideSpinner()}))}},{key:"handleEditQuestion",value:function(e,t){e.uid=this.questionId,this.dialog.open(_e,{data:{q:e,u:t},width:"100%",hasBackdrop:!0})}}]),e}()).\u0275fac=function(e){return new(e||Qe)(d.Ob(b.a),d.Ob(b.b),d.Ob(x),d.Ob(ve),d.Ob(f.a),d.Ob(he.b),d.Ob(ie.a),d.Ob(ae.a))},Qe.\u0275cmp=d.Ib({type:Qe,selectors:[["app-selected-question-page"]],decls:6,vars:3,consts:[[4,"ngIf"],["YesNoDialog",""],["loadingBlock",""],[1,"question-section-wrapper"],[1,"question-toolbar-header"],[1,"question-text"],[1,"question-footer"],["color","primary",4,"ngFor","ngForOf"],["class","footer-control question-footer-btns",4,"ngIf"],["class","comment-wrapper",4,"ngIf","ngIfElse"],["color","primary"],[1,"footer-control","question-footer-btns"],["mat-flat-button","","color","accent",1,"question-btn",3,"click"],["class","question-btn","mat-flat-button","","color","primary",3,"click",4,"ngIf"],["class","question-btn","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["class","question-btn","mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",1,"question-btn",3,"click"],["mat-flat-button","","color","warn",1,"question-btn",3,"click"],[1,"comment-wrapper"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"comment-author"],[3,"src","alt"],[1,"comment-text"],[1,"controls-wrapper"],["mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-fab","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"checked-icon"],["matDialogTitle",""],[1,"yes-no-content"],["align","end"],["mat-flat-button","","mat-dialog-close","","color","primary"]],template:function(e,t){1&e&&(d.Ac(0,Ee,19,15,"div",0),d.gc(1,"async"),d.Ac(2,Be,21,7,"ng-template",null,1,d.Bc),d.Ac(4,Le,2,0,"ng-template",null,2,d.Bc)),2&e&&d.mc("ngIf",d.hc(1,1,t.currentQuestion$))},directives:[r.l,E.b,r.k,E.a,U.a,F.a,he.h,he.e,he.c,he.d],pipes:[r.b,r.e],styles:["[_nghost-%COMP%]{width:100%}.question-section-wrapper[_ngcontent-%COMP%]{width:100%;margin-top:1rem;padding:2rem 1.5rem;border:1px solid var(--dark-color)}.question-toolbar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}h1[_ngcontent-%COMP%]{text-align:center;text-transform:capitalize;font-weight:700;padding-bottom:1rem;border-bottom:1px solid var(--dark-color)}h3[_ngcontent-%COMP%]{font-weight:600;font-style:italic}.question-text[_ngcontent-%COMP%]{padding-top:1rem;text-align:left;font-size:18px}.question-footer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;justify-content:space-between}.question-footer-btns[_ngcontent-%COMP%]{flex:0 1 70%;text-align:right}.question-btn[_ngcontent-%COMP%]{min-width:80px;margin-left:5px}.comment-wrapper[_ngcontent-%COMP%]{width:100%;margin-top:1rem;padding:2rem 1.5rem;border:1px solid var(--dark-color)}.comment-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;text-align:left;text-transform:capitalize;display:flex;flex-direction:column}.comment[_ngcontent-%COMP%]{width:100%;padding:1rem;border:1px solid var(--dark-color);margin-top:.5rem;display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:flex-start}.comment-author[_ngcontent-%COMP%]{width:150px;position:relative}.comment-author[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.comment-author[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 5px;position:absolute;bottom:0;left:50%;background:#ff0;color:purple;transform:translate(-50%);width:100%;text-align:center}.comment-text[_ngcontent-%COMP%]{flex:0 1 70%;padding:0 .5rem;text-align:center;font-size:18px}.comment-text[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-weight:700}.controls-wrapper[_ngcontent-%COMP%]{flex:0 1 10%}mat-icon.checked-icon[_ngcontent-%COMP%]{height:72px;width:72px;color:#28a745;font-size:72px}@media screen and (max-width:992px){.comment-text[_ngcontent-%COMP%]{flex:0 1 50%}}@media screen and (max-width:768px){.comment[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center}.comment-text[_ngcontent-%COMP%]{margin:1rem 0}}"]}),Qe),Ge=n("UbJi"),$e=((Ve=function(){function e(t,n){_classCallCheck(this,e),this.db=t,this.afAuth=n}return _createClass(e,[{key:"getAllUsers",value:function(){return this.db.collection("users").snapshotChanges().pipe(Object(T.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return Object.assign({uid:e.payload.doc.id},t)}))})))}},{key:"updateUserProfileInfo",value:function(e,t){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.afAuth.currentUser;case 3:if(r=n.sent,n.t0=e.uid===r.uid,!n.t0){n.next=12;break}if(n.t1=t,!n.t1){n.next=10;break}return n.next=10,r.updatePassword(t);case 10:return n.next=12,r.updateProfile({displayName:e.displayName,photoURL:e.photoURL});case 12:return n.next=14,this.db.doc("users/".concat(e.uid)).update(e);case 14:return n.abrupt("return",e);case 17:throw n.prev=17,n.t2=n.catch(0),new Error(n.t2);case 20:case"end":return n.stop()}}),n,this,[[0,17]])})))}}]),e}()).\u0275fac=function(e){return new(e||Ve)(d.Xb(M.a),d.Xb(Ge.a))},Ve.\u0275prov=d.Kb({token:Ve,factory:Ve.\u0275fac}),Ve),Je=n("/1cH");function Ye(e,t){1&e&&(d.Tb(0,"mat-error"),d.Cc(1,"Enter NickName!"),d.Sb())}function Ke(e,t){1&e&&(d.Tb(0,"mat-error"),d.Cc(1,"Enter correct URL!"),d.Sb())}function He(e,t){1&e&&(d.Tb(0,"mat-error"),d.Cc(1,"Password to short!"),d.Sb())}function Xe(e,t){if(1&e&&(d.Tb(0,"mat-option",27),d.Cc(1),d.Sb()),2&e){var n=t.$implicit;d.mc("value",n.email||n.displayName)("id",n.uid),d.Cb(1),d.Ec(" ",n.email||n.displayName," ")}}function We(e,t){if(1&e){var n=d.Ub();d.Tb(0,"mat-form-field",21),d.Tb(1,"input",22,23),d.bc("keypress",(function(){d.tc(n);var e=d.sc(2);return d.fc(3).filterUsers(e.value)})),d.Sb(),d.Tb(3,"mat-autocomplete",24,25),d.bc("optionSelected",(function(e){return d.tc(n),d.fc(3).displayRoles(e)})),d.Ac(5,Xe,2,3,"mat-option",26),d.Sb(),d.Sb()}if(2&e){var r=d.sc(4),o=d.fc(3);d.Cb(1),d.mc("matAutocomplete",r),d.Cb(4),d.mc("ngForOf",o.filteredList)}}function Ze(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div"),d.Tb(1,"mat-checkbox",28,29),d.bc("change",(function(){d.tc(n);var e=d.sc(2);return d.fc(3).selectedUser.roles.admin=e.checked})),d.Cc(3,"Admin"),d.Sb(),d.Tb(4,"mat-checkbox",28,30),d.bc("change",(function(){d.tc(n);var e=d.sc(5);return d.fc(3).selectedUser.roles.guest=e.checked})),d.Cc(6,"Guest"),d.Sb(),d.Sb()}if(2&e){var r=d.fc(3);d.Cb(1),d.mc("checked",r.selectedUser.roles.admin),d.Cb(3),d.mc("checked",r.selectedUser.roles.guest)}}function et(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div",10),d.Tb(1,"mat-expansion-panel",11),d.Tb(2,"mat-expansion-panel-header"),d.Tb(3,"mat-panel-title"),d.Cc(4," Change Password "),d.Sb(),d.Tb(5,"mat-panel-description"),d.Tb(6,"mat-checkbox",null,18),d.Cc(8,"Change"),d.Sb(),d.Sb(),d.Sb(),d.Tb(9,"div",19),d.Ac(10,We,6,2,"mat-form-field",20),d.Ac(11,Ze,7,2,"div",8),d.Sb(),d.Tb(12,"div",10),d.Tb(13,"button",16),d.bc("click",(function(){return d.tc(n),d.fc(2).updateUserRole()})),d.Cc(14,"Update Roles"),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&e){var r=d.sc(7),o=d.fc(2);d.Cb(1),d.mc("disabled",!r.checked)("expanded",r.checked)("hideToggle",!0),d.Cb(9),d.mc("ngIf",o.filteredList.length>0),d.Cb(1),d.mc("ngIf",o.showRole),d.Cb(2),d.mc("disabled",!o.selectedUser)}}function tt(e,t){if(1&e){var n=d.Ub();d.Tb(0,"div",2),d.Tb(1,"div",3),d.Pb(2,"img",4),d.Tb(3,"span"),d.Cc(4),d.Sb(),d.Sb(),d.Tb(5,"div",5),d.Tb(6,"mat-form-field",6),d.Tb(7,"mat-label"),d.Cc(8,"Nickname"),d.Sb(),d.Pb(9,"input",7),d.Ac(10,Ye,2,0,"mat-error",8),d.Sb(),d.Tb(11,"mat-form-field",6),d.Tb(12,"mat-label"),d.Cc(13,"Photo Reference"),d.Sb(),d.Pb(14,"input",9),d.Ac(15,Ke,2,0,"mat-error",8),d.Sb(),d.Tb(16,"div",10),d.Tb(17,"mat-expansion-panel",11),d.Tb(18,"mat-expansion-panel-header"),d.Tb(19,"mat-panel-title"),d.Cc(20," Change Password "),d.Sb(),d.Tb(21,"mat-panel-description"),d.Tb(22,"mat-checkbox",12,13),d.bc("change",(function(){d.tc(n);var e=d.sc(23),t=d.fc();return e.checked?null:t.form.get("userPassword").setValue("")})),d.Cc(24,"Change"),d.Sb(),d.Sb(),d.Sb(),d.Tb(25,"mat-form-field",14),d.Tb(26,"mat-label"),d.Cc(27,"Your password"),d.Sb(),d.Pb(28,"input",15),d.Ac(29,He,2,0,"mat-error",8),d.Sb(),d.Sb(),d.Sb(),d.Tb(30,"div",10),d.Tb(31,"button",16),d.bc("click",(function(){d.tc(n);var e=t.ngIf;return d.fc().updateCurrentUser(e)})),d.Cc(32,"Update"),d.Sb(),d.Sb(),d.Ac(33,et,15,6,"div",17),d.Sb(),d.Sb()}if(2&e){var r=t.ngIf,o=d.sc(23),i=d.fc();d.Cb(2),d.nc("src",r.photoURL,d.vc),d.nc("alt",r.displayName?r.email:r.displayName),d.Cb(2),d.Dc(r.displayName),d.Cb(1),d.mc("formGroup",i.form),d.Cb(4),d.nc("value",r.displayName),d.Cb(1),d.mc("ngIf",i.form.get("nickName").invalid),d.Cb(4),d.nc("value",r.photoURL),d.Cb(1),d.mc("ngIf",i.form.get("photoUrl").invalid),d.Cb(2),d.mc("disabled",!o.checked)("expanded",o.checked)("hideToggle",!0),d.Cb(12),d.mc("ngIf",i.form.get("userPassword").hasError("minlength")),d.Cb(2),d.mc("disabled",i.form.invalid),d.Cb(2),d.mc("ngIf",r.roles.admin)}}function nt(e,t){1&e&&(d.Tb(0,"h1"),d.Cc(1,"Loading data ..."),d.Sb())}var rt,ot,it=((ot=function(){function e(t,n,r,o){_classCallCheck(this,e),this.authService=t,this._snackBar=n,this.spinnerService=r,this.userInfoService=o,this.userList=[],this.filteredList=[],this.showRole=!1,this.showUserMsg=new u(this._snackBar)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.userInfoService.getAllUsers().subscribe((function(t){e.userList=_toConsumableArray(t),e.filteredList=_toConsumableArray(e.userList)})),this.user$=this.authService.checkUser().pipe(Object(k.a)((function(t){return e.initForm(t)})))}},{key:"initForm",value:function(e){this.form=new l.e({nickName:new l.c(e.displayName,[l.q.required]),photoUrl:new l.c(e.photoURL,[l.q.required,l.q.pattern("https?://.+")]),userPassword:new l.c(null,[l.q.minLength(6)])})}},{key:"updateCurrentUser",value:function(e){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.form.invalid){t.next=2;break}return t.abrupt("return");case 2:return n=this.form.value.userPassword,r={uid:e.uid,roles:e.roles,photoURL:this.form.value.photoUrl,displayName:this.form.value.nickName,email:e.email,emailVerified:e.emailVerified},t.prev=3,this.spinnerService.showSpinner(),t.next=7,n?this.userInfoService.updateUserProfileInfo(r,n):this.userInfoService.updateUserProfileInfo(r);case 7:o=t.sent,this.showUserMsg.showMsg("User: ".concat(o.displayName," / ").concat(o.email," info was updated!")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.showUserMsg.showMsg("Error: ".concat(t.t0.message),"Error");case 14:return t.prev=14,this.spinnerService.hideSpinner(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[3,11,14,17]])})))}},{key:"updateUserRole",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.selectedUser){e.next=15;break}return e.prev=1,this.spinnerService.showSpinner(),e.next=5,this.userInfoService.updateUserProfileInfo(this.selectedUser);case 5:t=e.sent,this.showUserMsg.showMsg("User: ".concat(t.displayName," / ").concat(t.email," ROLES was updated!")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.showUserMsg.showMsg("Error: ".concat(e.t0.message),"Error");case 12:return e.prev=12,this.spinnerService.hideSpinner(),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,9,12,15]])})))}},{key:"filterUsers",value:function(e){this.showRole=!1;var t=e.trim().toLowerCase();this.filteredList=this.userList.filter((function(e){var n=!1,r=!1;return e.email&&(n=e.email.toLowerCase().trim().includes(t)),e.displayName&&(r=e.displayName.toLowerCase().trim().includes(t)),n||r}))}},{key:"displayRoles",value:function(e){this.selectedUser=this.userList.find((function(t){return t.uid===e.option.id})),this.showRole=!0}}]),e}()).\u0275fac=function(e){return new(e||ot)(d.Ob(f.a),d.Ob(ie.a),d.Ob(ae.a),d.Ob($e))},ot.\u0275cmp=d.Ib({type:ot,selectors:[["app-profile-page"]],decls:4,vars:4,consts:[["class","profile-wrapper",4,"ngIf","ngIfElse"],["loadingBlock",""],[1,"profile-wrapper"],[1,"info-wrapper"],[3,"src","alt"],[1,"form-wrapper",3,"formGroup"],["appearance","outline",1,"form-element-wrapper"],["matInput","","formControlName","nickName",3,"value"],[4,"ngIf"],["matInput","","type","url","formControlName","photoUrl",3,"value"],[1,"form-element-wrapper"],[3,"disabled","expanded","hideToggle"],[3,"change"],["changePassword",""],["appearance","outline"],["matInput","","type","password","formControlName","userPassword"],["mat-flat-button","","color","accent",3,"disabled","click"],["class","form-element-wrapper",4,"ngIf"],["changeRole",""],[1,"roles-controls-wrapper"],["appearance","outline","class","example-full-width",4,"ngIf"],["appearance","outline",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Number","matInput","",3,"matAutocomplete","keypress"],["search",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","id",4,"ngFor","ngForOf"],[3,"value","id"],[3,"checked","change"],["AdChk",""],["GsChk",""]],template:function(e,t){if(1&e&&(d.Ac(0,tt,34,14,"div",0),d.gc(1,"async"),d.Ac(2,nt,2,0,"ng-template",null,1,d.Bc)),2&e){var n=d.sc(3);d.mc("ngIf",d.hc(1,2,t.user$))("ngIfElse",n)}},directives:[r.l,l.l,l.f,P.c,P.f,N.a,l.b,l.k,l.d,_.c,_.e,_.f,_.d,R.a,U.a,P.b,Je.c,Je.a,r.k,A.i],pipes:[r.b],styles:["[_nghost-%COMP%]{width:100%;margin-top:2rem}.profile-wrapper[_ngcontent-%COMP%]{width:100%;border:1px solid var(--dark-color);padding:1.5rem 1rem;display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}.info-wrapper[_ngcontent-%COMP%]{flex:0 1 35%;position:relative}.info-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.info-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;position:absolute;bottom:0;left:0;padding:3px 6px;background:#673ab7;color:#fff}.form-wrapper[_ngcontent-%COMP%]{flex:0 1 60%;display:flex;flex-direction:column}.form-element-wrapper[_ngcontent-%COMP%]{width:100%;margin-bottom:1.2rem;padding:0}.form-element-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:0 auto}.roles-controls-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}@media screen and (max-width:768px){.info-wrapper[_ngcontent-%COMP%]{flex:0 1 100%}.form-wrapper[_ngcontent-%COMP%]{margin-top:1rem;flex:0 1 100%}}"]}),ot),at=((rt=function e(){_classCallCheck(this,e)}).\u0275mod=d.Mb({type:rt}),rt.\u0275inj=d.Lb({factory:function(e){return new(e||rt)},providers:[x,ve,$e],imports:[[r.c,oe.a,b.e.forChild([{path:"",redirectTo:"/content/questions",pathMatch:"full"},{path:"questions",component:re},{path:"questions/create",component:me,pathMatch:"full"},{path:"question/:uid",component:ze,pathMatch:"full"},{path:"profile",component:it}])]]}),rt)}}]);